---
import { siteConfig } from "../config";

const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
const hasExperience = siteConfig.experience && siteConfig.experience.length > 0;
const hasEducation = siteConfig.education && siteConfig.education.length > 0;
---

<header id="header" class="fixed top-0 left-0 right-0 z-50 bg-transparent md:bg-white transition-all duration-300">
  <nav class="max-w-7xl mx-auto px-6 py-4 relative flex items-center justify-center">
    <!-- Desktop Nav -->
    <ul class="hidden md:flex items-center gap-8 justify-center">
      <li><a href="#about" class="nav-link">About</a></li>
      {hasProjects && <li><a href="#projects" class="nav-link">Projects</a></li>}
      {hasExperience && <li><a href="#experience" class="nav-link">Experience</a></li>}
      {hasEducation && <li><a href="#education" class="nav-link">Education</a></li>}
    </ul>

    <!-- Mobile Hamburger Button -->
    <button
      id="menu-btn"
      class="md:hidden fixed top-6 right-4 flex flex-col items-center focus:outline-none z-50 space-y-0.5"
      aria-label="Toggle Menu"
    >
      <span class="hamburger-lines flex flex-col justify-between w-6 h-4">
        <span class="block w-6 h-0.5 bg-black"></span>
        <span class="block w-6 h-0.5 bg-black"></span>
        <span class="block w-6 h-0.5 bg-black"></span>
      </span>
      <span class="close-text hidden text-black font-bold">Close</span>
    </button>
  </nav>
</header>

<!-- Fullscreen Mobile Menu -->
<div
  id="mobile-menu"
  class="fixed inset-0 z-40 bg-white flex flex-col items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300"
>
  <a href="#about" class="nav-link mb-6">About</a>
  {hasProjects && <a href="#projects" class="nav-link mb-6">Projects</a>}
  {hasExperience && <a href="#experience" class="nav-link mb-6">Experience</a>}
  {hasEducation && <a href="#education" class="nav-link mb-6">Education</a>}
</div>

<script>
  const menuBtn = document.getElementById("menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");
  const hamburgerLines = menuBtn.querySelector(".hamburger-lines");
  const closeText = menuBtn.querySelector(".close-text");
  const menuLinks = mobileMenu.querySelectorAll("a.nav-link");

  function toggleMenu() {
    mobileMenu.classList.toggle("opacity-0");
    mobileMenu.classList.toggle("pointer-events-none");
    hamburgerLines.classList.toggle("hidden");
    closeText.classList.toggle("hidden");
  }

  function closeMenu() {
    mobileMenu.classList.add("opacity-0");
    mobileMenu.classList.add("pointer-events-none");
    hamburgerLines.classList.remove("hidden");
    closeText.classList.add("hidden");
  }

  menuBtn.addEventListener("click", toggleMenu);

  menuLinks.forEach(link => {
    link.addEventListener("click", () => {
      closeMenu();
    });
  });

  const header = document.getElementById("header");
  window.addEventListener("scroll", () => {
    if (window.innerWidth >= 768) {
      if (window.scrollY > 100) {
        header?.classList.add("bg-white/80", "backdrop-blur-sm");
      } else {
        header?.classList.remove("bg-white/80", "backdrop-blur-sm");
      }
    }
  });
</script>

<style>
  html {
    scroll-behavior: smooth;
  }

  .nav-link {
    color: #111827;
    font-weight: 500;
    transition: color 0.35s ease;
  }

  #menu-btn span {
    transition: color 0.35s ease;
    color: #000;
  }

  #menu-btn:hover span {
    color: #3084E4;
  }

  #mobile-menu a.nav-link {
    font-size: 2rem;
    font-weight: 600;
    text-align: center;
  }

  .nav-link:hover {
    color: #3084E4;
  }

  #mobile-menu {
    transition: opacity 0.3s ease;
  }

  #mobile-menu.opacity-0 {
    opacity: 0;
    pointer-events: none;
  }

  #mobile-menu:not(.opacity-0) {
    opacity: 1;
    pointer-events: auto;
  }
</style>